# 构建"Big"项目

- 在构建一个关键的软件时，哪些是需要考虑的
- 微服务的概述以及go为啥适合微服务架构
- go的新手教程

团队需要有一个架构师，这个架构师一定要coding，
只有coding才能更加了解底层细节，约束和复杂性。

在所有事开始之前，需要做需求澄清，将顶层功能性需求和非功能性需求提取出来，
这个成功最关键的先决条件。

产品管理者大多只关心产品的特征，而很少提出非功能性需求或系统的质量，
利益相关者提出的非功能性需求又太多主观(要快，快到什么程度？)

非功能性需求一定要详细具体、可量度、可达到、可测试

架构三原则：
- 高度设计，将系统分解成高层次的组件
- 质量属性，单元测试+90%的覆盖率
- 产品速度，ci/cd从最开始就要进行
- a/b测试，让用户来选择什么是好

架构确定之后，需要进行技术选型：
- 编程语言，框架
- 单个组件的源代码构建工具
- db、供应商、技术战略、部署环境、升级策略

技术选型的目的是让所有的技术，在一起能把工作做好

技术选型之后，各方面的工作就可以开始展开了，架构师此时要为团队提供技术指导，
并不一定是某某技术的细节，而是确保各个组件是按蓝图(架构)在做事,
在每次设计评审会中将意图传达到团队，做一个掌舵者，怎么理解呢？
`在评审中，对于困难，询问开发者，而不是自己开处方`

开发者在产品持续交付的过程中，一般都需要知道产品额外信息，
她们核心目标是学习、讨论棘手的问题，并提高技能。
没有指导会导致积极性缺乏和人才流失。

项目开始之后，在截止日期、利益相关人的要求等因素的影响下，
目标状态(架构蓝图写的)和当前状态有不匹配，所以架构师需要和产品管理者、
工程师管理者一起，参与到团队中每个冲刺计划。

没有中心主题和指导原则的架构和设计，就像是盲人摸象，
高层次的抽象和底层的细节都需要考虑到，作为架构师，
不是每天写底层细节文档的，而是给开发人员一个意图和指导原则，
开发人员依据这些，在开发时不要偏离这些。

多年来，有很多架构范式，共同点是：管理复杂度。

代码到组件，组件到整体。整体提供功能。

系统拆分成组件，好或坏的区分的标准是：
- 高内聚
- 低耦合

组件特性：
- 易扩展(功能和数据)
- 可替换(替换之后不影响系统的其他部分)

    the clean architecture
    分4层，最里面最抽象，最外面使用的都是一些机制，eg数据库，web框架等，
    最里面是业务规则，不变的企业业务规则在最里面，其次是应用的业务规则，
    再其次是控制层，也可以理解为接口适配层

    业务规则是需要开发的，框架(最外层)一般用就够了，不需要开发，
    内层不需要外层的细节，所有的沟通和数据通过边界交换

不同的架构范式，带来不同的理解角度，下面是一些主流的架构范式：
- 基于包
    一个package就是一个组件
- 分层
    按功能分层，层只会于下一层交互
    好处是减少复杂性，提高了重用性
    最典型的是7层网络的分层
- 异步
    包括消息总线、actor模型、csp模型
    系统间的交互是通过消息或事件进行
    低耦合：生成者不关心具体哪个消费者，也不关心有多少个消费者
- 面向对象
    数据和对数据的操作封装在一起
- mvc
    呈现层单独出来
    和用户交互的放在view层
- 微服务
    service oriented architecture(soa)
    系统由独立的services组成

小团队到大团队的几点问题:
- 代码复杂度提高，
- 开发运维的分割
- 业务的增长触碰到扩展的极限
- 测试代码的增加，导致回归测试很脆弱，变相降低了开发者的产能

微服务：
- 独立 自主  自包含  独立部署  独立扩展

微服务的挑战：
- 性能
- 语言的复杂度

go是一个好的选择

组合大于继承
